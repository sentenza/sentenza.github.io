<!DOCTYPE html>
<html lang="en-GB">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  
  
  <title>Work with Scala using sbt and Spacemacs</title>
  <meta name="description" content="How to be productive with Scala using lean tools">
  

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/2017/08/19/scala-with-sbt-and-emacs/">
  
  
  <link rel="alternate" type="application/rss+xml" title="Alfredo Torre" href="http://localhost:4000/feed.xml">

  

  
  <meta name="twitter:card" content="summary">
  
  <meta name="twitter:title" content="Work with Scala using sbt and Spacemacs">
  <meta name="twitter:description" content="How to be productive with Scala using lean tools">
  
  

  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css?family=Bitter:400,400i,700" rel="stylesheet">

  
  <!-- Google Analytics -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-3444253-11', 'auto');
    ga('send', 'pageview');

  </script>


</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">Alfredo Torre</a>

    <nav class="site-nav">
      
        
        <a class="page-link" href="/about/">About</a>
      
        
        <a class="page-link" href="/curriculum-vitae/">Curriculm vitae</a>
      
        
        <a class="page-link" href="/archives/">Archives</a>
      
        
        <a class="page-link" href="https://github.com/sentenza">GitHub</a>
      
    </nav>

  </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    
      <h1 class="post-title" itemprop="name headline">Work with Scala using sbt and Spacemacs</h1>
    
    <p class="post-meta"><time datetime="2017-08-19T00:00:00+01:00" itemprop="datePublished">Aug 19, 2017</time> •
  
    
    
      
    
      
    
      
    
      
    
      
    
      
        <a href="/categories/scala/">scala</a>
      
    
  


 •
  
    
    
      
    
      
    
      
        <a href="/tags/sbt/">sbt</a>,
      
    
      
    
      
    
      
    
  
    
    
      
    
      
    
      
    
      
        <a href="/tags/emacs/">emacs</a>
      
    
      
    
      
    
  

</p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Start programming and experimenting with a functional programming language like Scala might not seem simple at first sight. So,
to get your feet wet it’s useful to have the very essential in a single place. I started writing this post in the form of
a gist, but then I realized that maybe it was better to share it with the community.</p>

<p><img src="http://www.scala-sbt.org/assets/typesafe_sbt_svg.svg" height="100" width="100" align="middle" /></p>

<p><code class="highlighter-rouge">sbt</code> (aka <em>Simple Build Tool</em>) is a general purpose build tool written in Scala for JVM developers. It took advantage of previous ideas developed by other similar tools like Maven, Gradle and Ant.</p>

<ol>
  <li>Default project layouts</li>
  <li>Built-in tasks</li>
  <li>Plugin architecture</li>
  <li>Declarative Dependency management</li>
  <li>Code over Configuration: A DSL for build tool</li>
  <li>Interactive</li>
  <li>Scala REPL integration</li>
</ol>

<p>In order to have a better understanding of the main tool you’ll use programming with Scala you must read:</p>

<ul>
  <li><a href="https://github.com/shekhargulati/52-technologies-in-2016/blob/master/02-sbt/README.md">SBT: The missing tutorial</a></li>
  <li><a href="http://www.scala-sbt.org/0.13/docs/index.html">The sbt reference manual</a></li>
</ul>

<!--more-->

<h2 id="project-scaffolding-doing-it-in-the-right-way">Project scaffolding (doing it in the right way)</h2>

<p>The best way to organize your codebase, using <strong>sbt</strong>, is to follow <a href="http://www.scala-sbt.org/0.13/docs/Directories.html">the same folder structure used by Maven</a>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>src/
  main/
    resources/
       &lt;files to include in main jar here&gt;
    scala/
       &lt;main Scala sources&gt;
    java/
       &lt;main Java sources&gt;
  test/
    resources
       &lt;files to include in test jar here&gt;
    scala/
       &lt;test Scala sources&gt;
    java/
       &lt;test Java sources&gt;
</code></pre></div></div>

<h3 id="create-a-new-project-using-sbt">Create a new project using sbt</h3>

<p>At first, you’ve to create the new project folder (e.g. <code class="highlighter-rouge">myproject</code>). Then, put inside the new folder a file named <code class="highlighter-rouge">build.sbt</code>, which contains the build settings that sbt will use. to house the build script (<a href="http://www.scala-sbt.org/0.13/docs/Basic-Def.html#How+build.sbt+defines+settings">how build.sbt defines settings</a>). This file, at the very beginning, will look like the following:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">name</span> <span class="o">:=</span> <span class="s">"myproject"</span>
<span class="n">version</span> <span class="o">:=</span> <span class="s">"0.1.0"</span>
<span class="n">scalaVersion</span> <span class="o">:=</span> <span class="s">"2.12.2"</span>
</code></pre></div></div>
<p>where <code class="highlighter-rouge">:=</code> is a function defined in the <code class="highlighter-rouge">sbt</code> library. It is used to define a setting that overwrites any previous value without referring to other settings. In order to define the version of Scala that sbt will pick up it’s possible to define a specific <code class="highlighter-rouge">scalaVersion</code>, but before doing so it’s better to verify your environment configuration and the current version of your Scala compiler (<code class="highlighter-rouge">scala -version</code>).</p>

<blockquote>
  <p>If the Scala version is not specified, the version sbt was built against is used. It is recommended to explicitly specify the version of Scala.<br />
Please note that because <code class="highlighter-rouge">compile</code> is a dependency of <code class="highlighter-rouge">run</code>, you don’t have to run <code class="highlighter-rouge">compile</code> before each <code class="highlighter-rouge">run</code>; just type <code class="highlighter-rouge">sbt run</code>.</p>
</blockquote>

<p>@see <a href="http://www.scala-sbt.org/0.13/docs/Howto-Scala.html">sbt documentation</a></p>

<p><code class="highlighter-rouge">sbt.version</code> <a href="http://www.scala-sbt.org/release/docs/Basic-Def.html#Specifying+the+sbt+version">specifies the target sbt version</a> that our build will use. If the required version is not available locally, the sbt launcher will download it for you. If this file is not present, the sbt launcher will choose an arbitrary version, <strong>which is discouraged because it makes your build non-portable</strong>.</p>

<p><kbd>/project/build.properties</kbd></p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sbt</span><span class="o">.</span><span class="n">version</span> <span class="k">=</span> <span class="mf">0.13</span><span class="o">.</span><span class="mi">16</span>
</code></pre></div></div>

<p>To retrieve the essential information about sbt (also see <a href="https://stackoverflow.com/a/8462854/1977778">this SO answer</a>) you’re running on you can use the following command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sbt about

[warn] No sbt.version set in project/build.properties, base directory: /tmp
[info] Set current project to tmp (in build file:/tmp/)
[info] This is sbt 1.0.0
[info] The current project is {file:/tmp/}tmp 0.1-SNAPSHOT
[info] The current project is built against Scala 2.12.3
[info] Available Plugins: sbt.plugins.IvyPlugin, sbt.plugins.JvmPlugin, sbt.plugins.CorePlugin, sbt.plugins.JUnitXmlReportPlugin, sbt.plugins.Giter8TemplatePlugin
[info] sbt, sbt plugins, and build definitions are using Scala 2.12.3
</code></pre></div></div>

<p>What’s more, in the <em>interactive mode</em> <code class="highlighter-rouge">sbt</code> has a list of useful commands that guide you in the day to day work like <code class="highlighter-rouge">help</code> and <code class="highlighter-rouge">tasks</code>. One of the most useful things of sbt is the automatic and continous execution of a task fired by the changes saved to a source file you’re editing. To trigger this kind of behaviour a task must be prepended with <code class="highlighter-rouge">~</code>. So, to execute all the tests that either failed during the previous execution or whose transitive dependencies changed the task is <code class="highlighter-rouge">~testQuick</code>, to stop its execution just hit <em>Enter</em>.</p>

<h4 id="add-scalatest">Add ScalaTest</h4>
<p>Starting from sbt 0.10 it’s possible to add the <a href="http://doc.scalatest.org/3.0.1/#org.scalatest.tools.Framework">ScalaTest framework</a> to a sbt project adding the following line to the <code class="highlighter-rouge">build.sbt</code>:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"org.scalatest"</span> <span class="o">%%</span> <span class="s">"scalatest"</span> <span class="o">%</span> <span class="s">"3.0.1"</span> <span class="o">%</span> <span class="s">"test"</span>
</code></pre></div></div>

<ul>
  <li><a href="http://www.scalatest.org/user_guide/using_scalatest_with_sbt">Using ScalaTest with sbt</a></li>
</ul>

<h4 id="start-simple-using-the-hello-world-template">Start simple using the <code class="highlighter-rouge">hello-world</code> template</h4>
<p>To start in the fastest way possible using <code class="highlighter-rouge">sbt</code> there is a <code class="highlighter-rouge">hello-world</code> template (the <a href="https://www.scala-lang.org/documentation/getting-started-sbt-track/getting-started-with-scala-and-sbt-in-the-command-line.html">full tutorial</a>) that can be imported just using <code class="highlighter-rouge">sbt</code> itself:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>sbt new scala/hello-world.g8
</code></pre></div></div>
<p>It’s worth to point out that <a href="https://github.com/scala/hello-world.g8/blob/master/src/main/g8/build.sbt">the default <code class="highlighter-rouge">build.sbt</code> template file</a> contained inside the <em>hello-world</em> template is a very good source of information if you want to know how to configure your new Scala project in a matter of minutes.</p>

<p>@see <a href="https://www.scala-lang.org/documentation/getting-started-sbt-track/getting-started-with-scala-and-sbt-in-the-command-line.html">Getting started with Scala and sbt in the CLI</a></p>

<h2 id="resources">Resources</h2>

<h3 id="ide-and-its-configuration">IDE and its configuration</h3>

<ul>
  <li><a href="http://www.rabbitonweb.com/2016/01/31/my-emacs-for-scala-development-part-1/">Emacs for Scala development</a></li>
  <li><a href="https://github.com/syl20bnr/spacemacs/tree/master/layers/%2Blang/scala">Spacemacs and the Scala layer</a></li>
  <li><a href="http://spacemacs.org/layers/+lang/scala/README.html">Spacemacs and ENSIME</a></li>
</ul>

  </div>

  
    <div class="post-comments" itemprop="comment">
      <hr />
<h1>Comments</h1>
<p>Insert your custom comment provider like <a href="https://disqus.com">Disqus</a> or <a href="https://posativ.org/isso">Isso</a> here.</p>

    </div>
  

</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <p>
      

&copy;  - Powered by <a href="https://jekyllrb.com">Jekyll</a> &amp; <a href="https://github.com/yous/whiteglass">whiteglass</a> - Subscribe via <a href="http://localhost:4000/feed.xml">RSS</a>

    </p>

  </div>

</footer>


  </body>

</html>
